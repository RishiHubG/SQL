USE CLIENTDEMO_DEV
GO

--1.
SET XACT_ABORT ON
--ROLLBACK COMMIT
BEGIN TRAN;
exec parseCustomFormData @name=N'cash',@description=N'cash',@apikey=N'cash',
@fullSchemaJson=N'{"components":[{"label":"cash","labelPosition":"top","tooltip":"","customClass":"","hidden":false,"hideLabel":true,"disabled":false,"tableView":false,"modalEdit":false,"persistent":true,"protected":false,"dbIndex":false,"encrypted":false,"redrawOn":"","clearOnHide":true,"customDefaultValue":"","calculateValue":"","calculateServer":false,"validate":{"required":false,"customMessage":"","custom":"","customPrivate":false,"json":"","strictDateValidation":false,"multiple":false,"unique":false},"unique":false,"validateOn":"change","errorLabel":"","key":"tabletemplatecontainer","tags":[],"properties":{},"conditional":{"show":null,"when":null,"eq":"","json":""},"customConditional":"","logic":[],"attributes":{},"overlay":{"style":"","page":"","left":"","top":"","width":"","height":""},"type":"container","input":true,"components":[{"label":"cash","labelPosition":"top","description":"","tooltip":"","disableAddingRemovingRows":false,"conditionalAddButton":"","reorder":false,"addAnother":"","addAnotherPosition":"bottom","defaultOpen":false,"layoutFixed":false,"enableRowGroups":false,"initEmpty":false,"customClass":"","tabindex":"","hidden":false,"hideLabel":false,"autofocus":false,"disabled":false,"tableView":false,"modalEdit":false,"defaultValue":[{"procedure":"","description":"","comments":"","completed":false,"refno":"","control":"","observation":"","conclusion":"","issues":"","complete":false,"auditManagerComments":""}],"persistent":true,"protected":false,"dbIndex":false,"encrypted":false,"redrawOn":"","clearOnHide":true,"customDefaultValue":"","calculateValue":"","calculateServer":false,"allowCalculateOverride":false,"validateOn":"change","validate":{"required":false,"minLength":"","maxLength":"","customMessage":"","custom":"","customPrivate":false,"json":"","strictDateValidation":false,"multiple":false,"unique":false},"unique":false,"errorLabel":"","key":"tabletemplatedatagrid","tags":[],"properties":{},"conditional":{"show":null,"when":null,"eq":"","json":""},"customConditional":"","logic":[],"attributes":{},"overlay":{"style":"","page":"","left":"","top":"","width":"","height":""},"type":"datagrid","input":true,"components":[{"label":"RefNo","tableView":true,"key":"refno","logic":[{"name":"Disable","trigger":{"type":"javascript","javascript":"result = document.location.href.indexOf(''/template'')<0"},"actions":[{"name":"Disable","type":"property","property":{"label":"Disabled","value":"disabled","type":"boolean"},"state":true}]}],"type":"textfield","input":true,"placeholder":"","prefix":"","customClass":"","suffix":"","multiple":false,"defaultValue":null,"protected":false,"unique":false,"persistent":true,"hidden":false,"clearOnHide":true,"refreshOn":"","redrawOn":"","modalEdit":false,"labelPosition":"top","description":"","errorLabel":"","tooltip":"","hideLabel":false,"tabindex":"","disabled":false,"autofocus":false,"dbIndex":false,"customDefaultValue":"","calculateValue":"","calculateServer":false,"widget":{"type":"input"},"attributes":{},"validateOn":"change","validate":{"required":false,"custom":"","customPrivate":false,"strictDateValidation":false,"multiple":false,"unique":false,"minLength":"","maxLength":"","pattern":""},"conditional":{"show":null,"when":null,"eq":""},"overlay":{"style":"","left":"","top":"","width":"","height":""},"allowCalculateOverride":false,"encrypted":false,"showCharCount":false,"showWordCount":false,"properties":{},"allowMultipleMasks":false,"mask":false,"inputType":"text","inputFormat":"plain","inputMask":"","spellcheck":true,"id":"e2g0hcf0000000000000000"},{"label":"Control","autoExpand":false,"tableView":true,"key":"control","logic":[{"name":"Disable","trigger":{"type":"javascript","json":"result = document.location.href.indexOf(''/template'')<0 ","javascript":"result = document.location.href.indexOf(''/template'')<0"},"actions":[{"name":"Disable","type":"property","property":{"label":"Disabled","value":"disabled","type":"boolean"},"state":true}]}],"type":"textarea","input":true,"placeholder":"","prefix":"","customClass":"","suffix":"","multiple":false,"defaultValue":null,"protected":false,"unique":false,"persistent":true,"hidden":false,"clearOnHide":true,"refreshOn":"","redrawOn":"","modalEdit":false,"labelPosition":"top","description":"","errorLabel":"","tooltip":"","hideLabel":false,"tabindex":"","disabled":false,"autofocus":false,"dbIndex":false,"customDefaultValue":"","calculateValue":"","calculateServer":false,"widget":{"type":"input"},"attributes":{},"validateOn":"change","validate":{"required":false,"custom":"","customPrivate":false,"strictDateValidation":false,"multiple":false,"unique":false,"minLength":"","maxLength":"","pattern":"","minWords":"","maxWords":""},"conditional":{"show":null,"when":null,"eq":""},"overlay":{"style":"","left":"","top":"","width":"","height":""},"allowCalculateOverride":false,"encrypted":false,"showCharCount":false,"showWordCount":false,"properties":{},"allowMultipleMasks":false,"mask":false,"inputType":"text","inputFormat":"html","inputMask":"","spellcheck":true,"rows":3,"wysiwyg":false,"editor":"","fixedSize":true,"id":"eucjlra0000000000000000"},{"label":"Procedure","autoExpand":false,"tableView":true,"key":"procedure","logic":[{"name":"Disable","trigger":{"type":"javascript","javascript":"result = document.location.href.indexOf(''/template'')<0"},"actions":[{"name":"Disable","type":"property","property":{"label":"Disabled","value":"disabled","type":"boolean"},"state":true}]}],"type":"textarea","input":true,"placeholder":"","prefix":"","customClass":"","suffix":"","multiple":false,"defaultValue":null,"protected":false,"unique":false,"persistent":true,"hidden":false,"clearOnHide":true,"refreshOn":"","redrawOn":"","modalEdit":false,"labelPosition":"top","description":"","errorLabel":"","tooltip":"","hideLabel":false,"tabindex":"","disabled":false,"autofocus":false,"dbIndex":false,"customDefaultValue":"","calculateValue":"","calculateServer":false,"widget":{"type":"input"},"attributes":{},"validateOn":"change","validate":{"required":false,"custom":"","customPrivate":false,"strictDateValidation":false,"multiple":false,"unique":false,"minLength":"","maxLength":"","pattern":"","minWords":"","maxWords":""},"conditional":{"show":null,"when":null,"eq":""},"overlay":{"style":"","left":"","top":"","width":"","height":""},"allowCalculateOverride":false,"encrypted":false,"showCharCount":false,"showWordCount":false,"properties":{},"allowMultipleMasks":false,"mask":false,"inputType":"text","inputFormat":"html","inputMask":"","spellcheck":true,"rows":3,"wysiwyg":false,"editor":"","fixedSize":true,"id":"evdj2gn0000000000000000"},{"label":"Observation","autoExpand":false,"tableView":true,"key":"observation","type":"textarea","input":true,"placeholder":"","prefix":"","customClass":"","suffix":"","multiple":false,"defaultValue":null,"protected":false,"unique":false,"persistent":true,"hidden":false,"clearOnHide":true,"refreshOn":"","redrawOn":"","modalEdit":false,"labelPosition":"top","description":"","errorLabel":"","tooltip":"","hideLabel":false,"tabindex":"","disabled":false,"autofocus":false,"dbIndex":false,"customDefaultValue":"","calculateValue":"","calculateServer":false,"widget":{"type":"input"},"attributes":{},"validateOn":"change","validate":{"required":false,"custom":"","customPrivate":false,"strictDateValidation":false,"multiple":false,"unique":false,"minLength":"","maxLength":"","pattern":"","minWords":"","maxWords":""},"conditional":{"show":null,"when":null,"eq":""},"overlay":{"style":"","left":"","top":"","width":"","height":""},"allowCalculateOverride":false,"encrypted":false,"showCharCount":false,"showWordCount":false,"properties":{},"allowMultipleMasks":false,"mask":false,"inputType":"text","inputFormat":"html","inputMask":"","spellcheck":true,"rows":3,"wysiwyg":false,"editor":"","fixedSize":true,"id":"exoree30000000000000000"},{"label":"Conclusion","labelPosition":"top","widget":"choicesjs","placeholder":"","description":"","tooltip":"","customClass":"","tabindex":"","hidden":false,"hideLabel":false,"uniqueOptions":false,"autofocus":false,"disabled":false,"tableView":true,"modalEdit":false,"multiple":false,"dataSrc":"values","data":{"values":[{"label":"Satisfactory","value":"Satisfactory"},{"label":"Un-Satisfactory","value":"Un-Satisfactory"},{"label":"N/A","value":"N/A"},{"label":"In Progress","value":"In Progress"}],"resource":"","json":"","url":"","custom":""},"valueProperty":"","dataType":"","idPath":"id","template":"<span>{{ item.label }}</span>","refreshOn":"","clearOnRefresh":false,"searchEnabled":true,"selectThreshold":0.3,"readOnlyValue":false,"customOptions":{},"persistent":true,"protected":false,"dbIndex":false,"encrypted":false,"clearOnHide":true,"customDefaultValue":"","calculateValue":"","calculateServer":false,"allowCalculateOverride":false,"validateOn":"change","validate":{"required":false,"customMessage":"","custom":"","customPrivate":false,"json":"","strictDateValidation":false,"multiple":false,"unique":false},"unique":false,"errorLabel":"","key":"conclusion","tags":[],"properties":{},"conditional":{"show":null,"when":null,"eq":"","json":""},"customConditional":"","logic":[],"attributes":{},"overlay":{"style":"","page":"","left":"","top":"","width":"","height":""},"type":"select","indexeddb":{"filter":{}},"selectFields":"","searchField":"","minSearch":0,"filter":"","limit":100,"redrawOn":"","input":true,"prefix":"","suffix":"","showCharCount":false,"showWordCount":false,"allowMultipleMasks":false,"lazyLoad":true,"authenticate":false,"searchThreshold":0.3,"fuseOptions":{"include":"score","threshold":0.3},"id":"e4awuw0000000000","defaultValue":""},{"label":"Issues","tableView":true,"key":"issues","logic":[{"name":"Mandatory","trigger":{"type":"javascript","javascript":"result=(data.tabletemplatedatagridconclusion==\"Un-Satisfactory\")"},"actions":[{"name":"Required","type":"property","property":{"label":"Required","value":"validate.required","type":"boolean"},"state":true}]}],"type":"textfield","input":true,"placeholder":"","prefix":"","customClass":"","suffix":"","multiple":false,"defaultValue":null,"protected":false,"unique":false,"persistent":true,"hidden":false,"clearOnHide":true,"refreshOn":"","redrawOn":"","modalEdit":false,"labelPosition":"top","description":"","errorLabel":"","tooltip":"","hideLabel":false,"tabindex":"","disabled":false,"autofocus":false,"dbIndex":false,"customDefaultValue":"","calculateValue":"","calculateServer":false,"widget":{"type":"input"},"attributes":{},"validateOn":"change","validate":{"required":false,"custom":"","customPrivate":false,"strictDateValidation":false,"multiple":false,"unique":false,"minLength":"","maxLength":"","pattern":""},"conditional":{"show":null,"when":null,"eq":""},"overlay":{"style":"","left":"","top":"","width":"","height":""},"allowCalculateOverride":false,"encrypted":false,"showCharCount":false,"showWordCount":false,"properties":{},"allowMultipleMasks":false,"mask":false,"inputType":"text","inputFormat":"plain","inputMask":"","spellcheck":true,"id":"e7neh0j0000000000000000"},{"label":"Complete","description":"","tooltip":"","shortcut":"","inputType":"checkbox","customClass":"","tabindex":"","hidden":false,"hideLabel":false,"autofocus":false,"disabled":false,"tableView":false,"modalEdit":false,"defaultValue":false,"persistent":true,"protected":false,"dbIndex":false,"encrypted":false,"redrawOn":"","clearOnHide":true,"customDefaultValue":"","calculateValue":"","calculateServer":false,"allowCalculateOverride":false,"validate":{"required":false,"customMessage":"","custom":"","customPrivate":false,"json":"","strictDateValidation":false,"multiple":false,"unique":false},"errorLabel":"","key":"complete","tags":[],"properties":{},"conditional":{"show":null,"when":null,"eq":"","json":""},"customConditional":"","logic":[],"attributes":{},"overlay":{"style":"","page":"","left":"","top":"","width":"","height":""},"type":"checkbox","name":"","value":"","input":true,"placeholder":"","prefix":"","suffix":"","multiple":false,"unique":false,"refreshOn":"","labelPosition":"right","widget":null,"validateOn":"change","showCharCount":false,"showWordCount":false,"allowMultipleMasks":false,"dataGridLabel":true,"id":"e3kxhnq000000000"},{"label":"Audit Manager Comments","tableView":true,"key":"auditManagerComments","type":"textfield","input":true,"placeholder":"","prefix":"","customClass":"","suffix":"","multiple":false,"defaultValue":null,"protected":false,"unique":false,"persistent":true,"hidden":false,"clearOnHide":true,"refreshOn":"","redrawOn":"","modalEdit":false,"labelPosition":"top","description":"","errorLabel":"","tooltip":"","hideLabel":false,"tabindex":"","disabled":false,"autofocus":false,"dbIndex":false,"customDefaultValue":"","calculateValue":"","calculateServer":false,"widget":{"type":"input"},"attributes":{},"validateOn":"change","validate":{"required":false,"custom":"","customPrivate":false,"strictDateValidation":false,"multiple":false,"unique":false,"minLength":"","maxLength":"","pattern":""},"conditional":{"show":null,"when":null,"eq":""},"overlay":{"style":"","left":"","top":"","width":"","height":""},"allowCalculateOverride":false,"encrypted":false,"showCharCount":false,"showWordCount":false,"properties":{},"allowMultipleMasks":false,"mask":false,"inputType":"text","inputFormat":"plain","inputMask":"","spellcheck":true,"id":"ed9ipvi0000000000000000"}],"placeholder":"","prefix":"","suffix":"","multiple":false,"refreshOn":"","widget":null,"showCharCount":false,"showWordCount":false,"allowMultipleMasks":false,"tree":true,"id":"exfn3jk"}],"placeholder":"","prefix":"","suffix":"","multiple":false,"defaultValue":null,"refreshOn":"","description":"","tabindex":"","autofocus":false,"widget":null,"allowCalculateOverride":false,"showCharCount":false,"showWordCount":false,"allowMultipleMasks":false,"tree":true,"id":"ektev5f"},{"type":"button","label":"Submit","key":"submit","size":"md","block":false,"action":"submit","disableOnInvalid":true,"theme":"primary","input":true,"placeholder":"","prefix":"","customClass":"","suffix":"","multiple":false,"defaultValue":null,"protected":false,"unique":false,"persistent":false,"hidden":false,"clearOnHide":true,"refreshOn":"","redrawOn":"","tableView":false,"modalEdit":false,"labelPosition":"top","description":"","errorLabel":"","tooltip":"","hideLabel":false,"tabindex":"","disabled":false,"autofocus":false,"dbIndex":false,"customDefaultValue":"","calculateValue":"","calculateServer":false,"widget":{"type":"input"},"attributes":{},"validateOn":"change","validate":{"required":false,"custom":"","customPrivate":false,"strictDateValidation":false,"multiple":false,"unique":false},"conditional":{"show":null,"when":null,"eq":""},"overlay":{"style":"","left":"","top":"","width":"","height":""},"allowCalculateOverride":false,"encrypted":false,"showCharCount":false,"showWordCount":false,"properties":{},"allowMultipleMasks":false,"leftIcon":"","rightIcon":"","dataGridLabel":true,"id":"e75x9kb"}],"display":"form","finalDashboardConfig":null}',
@InputJSON=N'{"tabletemplatecontainer.tabletemplatedatagrid":{"label":"cash","labelPosition":"top","description":"","tooltip":"","disableAddingRemovingRows":false,"conditionalAddButton":"","reorder":false,"addAnother":"","addAnotherPosition":"bottom","defaultOpen":false,"layoutFixed":false,"enableRowGroups":false,"initEmpty":false,"customClass":"","tabindex":"","hidden":false,"hideLabel":false,"autofocus":false,"disabled":false,"tableView":false,"modalEdit":false,"defaultValue":[{"procedure":"","description":"","comments":"","completed":false,"refno":"","control":"","observation":"","conclusion":"","issues":"","complete":false,"auditManagerComments":""}],"persistent":true,"protected":false,"dbIndex":false,"encrypted":false,"redrawOn":"","clearOnHide":true,"customDefaultValue":"","calculateValue":"","calculateServer":false,"allowCalculateOverride":false,"validateOn":"change","validate":{"required":false,"minLength":"","maxLength":"","customMessage":"","custom":"","customPrivate":false,"json":"","strictDateValidation":false,"multiple":false,"unique":false},"unique":false,"errorLabel":"","key":"tabletemplatedatagrid","tags":[],"properties":{},"conditional":{"show":null,"when":null,"eq":"","json":""},"customConditional":"","logic":[],"attributes":{},"overlay":{"style":"","page":"","left":"","top":"","width":"","height":""},"type":"datagrid","input":true,"components":[{"label":"RefNo","tableView":true,"key":"refno","logic":[{"name":"Disable","trigger":{"type":"javascript","javascript":"result = document.location.href.indexOf(''/template'')<0"},"actions":[{"name":"Disable","type":"property","property":{"label":"Disabled","value":"disabled","type":"boolean"},"state":true}]}],"type":"textfield","input":true,"placeholder":"","prefix":"","customClass":"","suffix":"","multiple":false,"defaultValue":null,"protected":false,"unique":false,"persistent":true,"hidden":false,"clearOnHide":true,"refreshOn":"","redrawOn":"","modalEdit":false,"labelPosition":"top","description":"","errorLabel":"","tooltip":"","hideLabel":false,"tabindex":"","disabled":false,"autofocus":false,"dbIndex":false,"customDefaultValue":"","calculateValue":"","calculateServer":false,"widget":{"type":"input"},"attributes":{},"validateOn":"change","validate":{"required":false,"custom":"","customPrivate":false,"strictDateValidation":false,"multiple":false,"unique":false,"minLength":"","maxLength":"","pattern":""},"conditional":{"show":null,"when":null,"eq":""},"overlay":{"style":"","left":"","top":"","width":"","height":""},"allowCalculateOverride":false,"encrypted":false,"showCharCount":false,"showWordCount":false,"properties":{},"allowMultipleMasks":false,"mask":false,"inputType":"text","inputFormat":"plain","inputMask":"","spellcheck":true,"id":"e2g0hcf0000000000000000"},{"label":"Control","autoExpand":false,"tableView":true,"key":"control","logic":[{"name":"Disable","trigger":{"type":"javascript","json":"result = document.location.href.indexOf(''/template'')<0 ","javascript":"result = document.location.href.indexOf(''/template'')<0"},"actions":[{"name":"Disable","type":"property","property":{"label":"Disabled","value":"disabled","type":"boolean"},"state":true}]}],"type":"textarea","input":true,"placeholder":"","prefix":"","customClass":"","suffix":"","multiple":false,"defaultValue":null,"protected":false,"unique":false,"persistent":true,"hidden":false,"clearOnHide":true,"refreshOn":"","redrawOn":"","modalEdit":false,"labelPosition":"top","description":"","errorLabel":"","tooltip":"","hideLabel":false,"tabindex":"","disabled":false,"autofocus":false,"dbIndex":false,"customDefaultValue":"","calculateValue":"","calculateServer":false,"widget":{"type":"input"},"attributes":{},"validateOn":"change","validate":{"required":false,"custom":"","customPrivate":false,"strictDateValidation":false,"multiple":false,"unique":false,"minLength":"","maxLength":"","pattern":"","minWords":"","maxWords":""},"conditional":{"show":null,"when":null,"eq":""},"overlay":{"style":"","left":"","top":"","width":"","height":""},"allowCalculateOverride":false,"encrypted":false,"showCharCount":false,"showWordCount":false,"properties":{},"allowMultipleMasks":false,"mask":false,"inputType":"text","inputFormat":"html","inputMask":"","spellcheck":true,"rows":3,"wysiwyg":false,"editor":"","fixedSize":true,"id":"eucjlra0000000000000000"},{"label":"Procedure","autoExpand":false,"tableView":true,"key":"procedure","logic":[{"name":"Disable","trigger":{"type":"javascript","javascript":"result = document.location.href.indexOf(''/template'')<0"},"actions":[{"name":"Disable","type":"property","property":{"label":"Disabled","value":"disabled","type":"boolean"},"state":true}]}],"type":"textarea","input":true,"placeholder":"","prefix":"","customClass":"","suffix":"","multiple":false,"defaultValue":null,"protected":false,"unique":false,"persistent":true,"hidden":false,"clearOnHide":true,"refreshOn":"","redrawOn":"","modalEdit":false,"labelPosition":"top","description":"","errorLabel":"","tooltip":"","hideLabel":false,"tabindex":"","disabled":false,"autofocus":false,"dbIndex":false,"customDefaultValue":"","calculateValue":"","calculateServer":false,"widget":{"type":"input"},"attributes":{},"validateOn":"change","validate":{"required":false,"custom":"","customPrivate":false,"strictDateValidation":false,"multiple":false,"unique":false,"minLength":"","maxLength":"","pattern":"","minWords":"","maxWords":""},"conditional":{"show":null,"when":null,"eq":""},"overlay":{"style":"","left":"","top":"","width":"","height":""},"allowCalculateOverride":false,"encrypted":false,"showCharCount":false,"showWordCount":false,"properties":{},"allowMultipleMasks":false,"mask":false,"inputType":"text","inputFormat":"html","inputMask":"","spellcheck":true,"rows":3,"wysiwyg":false,"editor":"","fixedSize":true,"id":"evdj2gn0000000000000000"},{"label":"Observation","autoExpand":false,"tableView":true,"key":"observation","type":"textarea","input":true,"placeholder":"","prefix":"","customClass":"","suffix":"","multiple":false,"defaultValue":null,"protected":false,"unique":false,"persistent":true,"hidden":false,"clearOnHide":true,"refreshOn":"","redrawOn":"","modalEdit":false,"labelPosition":"top","description":"","errorLabel":"","tooltip":"","hideLabel":false,"tabindex":"","disabled":false,"autofocus":false,"dbIndex":false,"customDefaultValue":"","calculateValue":"","calculateServer":false,"widget":{"type":"input"},"attributes":{},"validateOn":"change","validate":{"required":false,"custom":"","customPrivate":false,"strictDateValidation":false,"multiple":false,"unique":false,"minLength":"","maxLength":"","pattern":"","minWords":"","maxWords":""},"conditional":{"show":null,"when":null,"eq":""},"overlay":{"style":"","left":"","top":"","width":"","height":""},"allowCalculateOverride":false,"encrypted":false,"showCharCount":false,"showWordCount":false,"properties":{},"allowMultipleMasks":false,"mask":false,"inputType":"text","inputFormat":"html","inputMask":"","spellcheck":true,"rows":3,"wysiwyg":false,"editor":"","fixedSize":true,"id":"exoree30000000000000000"},{"label":"Conclusion","labelPosition":"top","widget":"choicesjs","placeholder":"","description":"","tooltip":"","customClass":"","tabindex":"","hidden":false,"hideLabel":false,"uniqueOptions":false,"autofocus":false,"disabled":false,"tableView":true,"modalEdit":false,"multiple":false,"dataSrc":"values","data":{"values":[{"label":"Satisfactory","value":"Satisfactory"},{"label":"Un-Satisfactory","value":"Un-Satisfactory"},{"label":"N/A","value":"N/A"},{"label":"In Progress","value":"In Progress"}],"resource":"","json":"","url":"","custom":""},"valueProperty":"","dataType":"","idPath":"id","template":"<span>{{ item.label }}</span>","refreshOn":"","clearOnRefresh":false,"searchEnabled":true,"selectThreshold":0.3,"readOnlyValue":false,"customOptions":{},"persistent":true,"protected":false,"dbIndex":false,"encrypted":false,"clearOnHide":true,"customDefaultValue":"","calculateValue":"","calculateServer":false,"allowCalculateOverride":false,"validateOn":"change","validate":{"required":false,"customMessage":"","custom":"","customPrivate":false,"json":"","strictDateValidation":false,"multiple":false,"unique":false},"unique":false,"errorLabel":"","key":"conclusion","tags":[],"properties":{},"conditional":{"show":null,"when":null,"eq":"","json":""},"customConditional":"","logic":[],"attributes":{},"overlay":{"style":"","page":"","left":"","top":"","width":"","height":""},"type":"select","indexeddb":{"filter":{}},"selectFields":"","searchField":"","minSearch":0,"filter":"","limit":100,"redrawOn":"","input":true,"prefix":"","suffix":"","showCharCount":false,"showWordCount":false,"allowMultipleMasks":false,"lazyLoad":true,"authenticate":false,"searchThreshold":0.3,"fuseOptions":{"include":"score","threshold":0.3},"id":"e4awuw0000000000","defaultValue":""},{"label":"Issues","tableView":true,"key":"issues","logic":[{"name":"Mandatory","trigger":{"type":"javascript","javascript":"result=(data.tabletemplatedatagridconclusion==\"Un-Satisfactory\")"},"actions":[{"name":"Required","type":"property","property":{"label":"Required","value":"validate.required","type":"boolean"},"state":true}]}],"type":"textfield","input":true,"placeholder":"","prefix":"","customClass":"","suffix":"","multiple":false,"defaultValue":null,"protected":false,"unique":false,"persistent":true,"hidden":false,"clearOnHide":true,"refreshOn":"","redrawOn":"","modalEdit":false,"labelPosition":"top","description":"","errorLabel":"","tooltip":"","hideLabel":false,"tabindex":"","disabled":false,"autofocus":false,"dbIndex":false,"customDefaultValue":"","calculateValue":"","calculateServer":false,"widget":{"type":"input"},"attributes":{},"validateOn":"change","validate":{"required":false,"custom":"","customPrivate":false,"strictDateValidation":false,"multiple":false,"unique":false,"minLength":"","maxLength":"","pattern":""},"conditional":{"show":null,"when":null,"eq":""},"overlay":{"style":"","left":"","top":"","width":"","height":""},"allowCalculateOverride":false,"encrypted":false,"showCharCount":false,"showWordCount":false,"properties":{},"allowMultipleMasks":false,"mask":false,"inputType":"text","inputFormat":"plain","inputMask":"","spellcheck":true,"id":"e7neh0j0000000000000000"},{"label":"Complete","description":"","tooltip":"","shortcut":"","inputType":"checkbox","customClass":"","tabindex":"","hidden":false,"hideLabel":false,"autofocus":false,"disabled":false,"tableView":false,"modalEdit":false,"defaultValue":false,"persistent":true,"protected":false,"dbIndex":false,"encrypted":false,"redrawOn":"","clearOnHide":true,"customDefaultValue":"","calculateValue":"","calculateServer":false,"allowCalculateOverride":false,"validate":{"required":false,"customMessage":"","custom":"","customPrivate":false,"json":"","strictDateValidation":false,"multiple":false,"unique":false},"errorLabel":"","key":"complete","tags":[],"properties":{},"conditional":{"show":null,"when":null,"eq":"","json":""},"customConditional":"","logic":[],"attributes":{},"overlay":{"style":"","page":"","left":"","top":"","width":"","height":""},"type":"checkbox","name":"","value":"","input":true,"placeholder":"","prefix":"","suffix":"","multiple":false,"unique":false,"refreshOn":"","labelPosition":"right","widget":null,"validateOn":"change","showCharCount":false,"showWordCount":false,"allowMultipleMasks":false,"dataGridLabel":true,"id":"e3kxhnq000000000"},{"label":"Audit Manager Comments","tableView":true,"key":"auditManagerComments","type":"textfield","input":true,"placeholder":"","prefix":"","customClass":"","suffix":"","multiple":false,"defaultValue":null,"protected":false,"unique":false,"persistent":true,"hidden":false,"clearOnHide":true,"refreshOn":"","redrawOn":"","modalEdit":false,"labelPosition":"top","description":"","errorLabel":"","tooltip":"","hideLabel":false,"tabindex":"","disabled":false,"autofocus":false,"dbIndex":false,"customDefaultValue":"","calculateValue":"","calculateServer":false,"widget":{"type":"input"},"attributes":{},"validateOn":"change","validate":{"required":false,"custom":"","customPrivate":false,"strictDateValidation":false,"multiple":false,"unique":false,"minLength":"","maxLength":"","pattern":""},"conditional":{"show":null,"when":null,"eq":""},"overlay":{"style":"","left":"","top":"","width":"","height":""},"allowCalculateOverride":false,"encrypted":false,"showCharCount":false,"showWordCount":false,"properties":{},"allowMultipleMasks":false,"mask":false,"inputType":"text","inputFormat":"plain","inputMask":"","spellcheck":true,"id":"ed9ipvi0000000000000000"}],"placeholder":"","prefix":"","suffix":"","multiple":false,"refreshOn":"","widget":null,"showCharCount":false,"showWordCount":false,"allowMultipleMasks":false,"tree":true,"id":"exfn3jk"},"tabletemplatecontainer.tabletemplatedatagrid.refno":{"label":"RefNo","tableView":true,"key":"refno","logic":[{"name":"Disable","trigger":{"type":"javascript","javascript":"result = document.location.href.indexOf(''/template'')<0"},"actions":[{"name":"Disable","type":"property","property":{"label":"Disabled","value":"disabled","type":"boolean"},"state":true}]}],"type":"textfield","input":true,"placeholder":"","prefix":"","customClass":"","suffix":"","multiple":false,"defaultValue":null,"protected":false,"unique":false,"persistent":true,"hidden":false,"clearOnHide":true,"refreshOn":"","redrawOn":"","modalEdit":false,"labelPosition":"top","description":"","errorLabel":"","tooltip":"","hideLabel":false,"tabindex":"","disabled":false,"autofocus":false,"dbIndex":false,"customDefaultValue":"","calculateValue":"","calculateServer":false,"widget":{"type":"input"},"attributes":{},"validateOn":"change","validate":{"required":false,"custom":"","customPrivate":false,"strictDateValidation":false,"multiple":false,"unique":false,"minLength":"","maxLength":"","pattern":""},"conditional":{"show":null,"when":null,"eq":""},"overlay":{"style":"","left":"","top":"","width":"","height":""},"allowCalculateOverride":false,"encrypted":false,"showCharCount":false,"showWordCount":false,"properties":{},"allowMultipleMasks":false,"mask":false,"inputType":"text","inputFormat":"plain","inputMask":"","spellcheck":true,"id":"e2g0hcf0000000000000000"},"tabletemplatecontainer.tabletemplatedatagrid.control":{"label":"Control","autoExpand":false,"tableView":true,"key":"control","logic":[{"name":"Disable","trigger":{"type":"javascript","json":"result = document.location.href.indexOf(''/template'')<0 ","javascript":"result = document.location.href.indexOf(''/template'')<0"},"actions":[{"name":"Disable","type":"property","property":{"label":"Disabled","value":"disabled","type":"boolean"},"state":true}]}],"type":"textarea","input":true,"placeholder":"","prefix":"","customClass":"","suffix":"","multiple":false,"defaultValue":null,"protected":false,"unique":false,"persistent":true,"hidden":false,"clearOnHide":true,"refreshOn":"","redrawOn":"","modalEdit":false,"labelPosition":"top","description":"","errorLabel":"","tooltip":"","hideLabel":false,"tabindex":"","disabled":false,"autofocus":false,"dbIndex":false,"customDefaultValue":"","calculateValue":"","calculateServer":false,"widget":{"type":"input"},"attributes":{},"validateOn":"change","validate":{"required":false,"custom":"","customPrivate":false,"strictDateValidation":false,"multiple":false,"unique":false,"minLength":"","maxLength":"","pattern":"","minWords":"","maxWords":""},"conditional":{"show":null,"when":null,"eq":""},"overlay":{"style":"","left":"","top":"","width":"","height":""},"allowCalculateOverride":false,"encrypted":false,"showCharCount":false,"showWordCount":false,"properties":{},"allowMultipleMasks":false,"mask":false,"inputType":"text","inputFormat":"html","inputMask":"","spellcheck":true,"rows":3,"wysiwyg":false,"editor":"","fixedSize":true,"id":"eucjlra0000000000000000"},"tabletemplatecontainer.tabletemplatedatagrid.procedure":{"label":"Procedure","autoExpand":false,"tableView":true,"key":"procedure","logic":[{"name":"Disable","trigger":{"type":"javascript","javascript":"result = document.location.href.indexOf(''/template'')<0"},"actions":[{"name":"Disable","type":"property","property":{"label":"Disabled","value":"disabled","type":"boolean"},"state":true}]}],"type":"textarea","input":true,"placeholder":"","prefix":"","customClass":"","suffix":"","multiple":false,"defaultValue":null,"protected":false,"unique":false,"persistent":true,"hidden":false,"clearOnHide":true,"refreshOn":"","redrawOn":"","modalEdit":false,"labelPosition":"top","description":"","errorLabel":"","tooltip":"","hideLabel":false,"tabindex":"","disabled":false,"autofocus":false,"dbIndex":false,"customDefaultValue":"","calculateValue":"","calculateServer":false,"widget":{"type":"input"},"attributes":{},"validateOn":"change","validate":{"required":false,"custom":"","customPrivate":false,"strictDateValidation":false,"multiple":false,"unique":false,"minLength":"","maxLength":"","pattern":"","minWords":"","maxWords":""},"conditional":{"show":null,"when":null,"eq":""},"overlay":{"style":"","left":"","top":"","width":"","height":""},"allowCalculateOverride":false,"encrypted":false,"showCharCount":false,"showWordCount":false,"properties":{},"allowMultipleMasks":false,"mask":false,"inputType":"text","inputFormat":"html","inputMask":"","spellcheck":true,"rows":3,"wysiwyg":false,"editor":"","fixedSize":true,"id":"evdj2gn0000000000000000"},"tabletemplatecontainer.tabletemplatedatagrid.observation":{"label":"Observation","autoExpand":false,"tableView":true,"key":"observation","type":"textarea","input":true,"placeholder":"","prefix":"","customClass":"","suffix":"","multiple":false,"defaultValue":null,"protected":false,"unique":false,"persistent":true,"hidden":false,"clearOnHide":true,"refreshOn":"","redrawOn":"","modalEdit":false,"labelPosition":"top","description":"","errorLabel":"","tooltip":"","hideLabel":false,"tabindex":"","disabled":false,"autofocus":false,"dbIndex":false,"customDefaultValue":"","calculateValue":"","calculateServer":false,"widget":{"type":"input"},"attributes":{},"validateOn":"change","validate":{"required":false,"custom":"","customPrivate":false,"strictDateValidation":false,"multiple":false,"unique":false,"minLength":"","maxLength":"","pattern":"","minWords":"","maxWords":""},"conditional":{"show":null,"when":null,"eq":""},"overlay":{"style":"","left":"","top":"","width":"","height":""},"allowCalculateOverride":false,"encrypted":false,"showCharCount":false,"showWordCount":false,"properties":{},"allowMultipleMasks":false,"mask":false,"inputType":"text","inputFormat":"html","inputMask":"","spellcheck":true,"rows":3,"wysiwyg":false,"editor":"","fixedSize":true,"id":"exoree30000000000000000"},"tabletemplatecontainer.tabletemplatedatagrid.conclusion":{"label":"Conclusion","labelPosition":"top","widget":"choicesjs","placeholder":"","description":"","tooltip":"","customClass":"","tabindex":"","hidden":false,"hideLabel":false,"uniqueOptions":false,"autofocus":false,"disabled":false,"tableView":true,"modalEdit":false,"multiple":false,"dataSrc":"values","data":{"values":[{"label":"Satisfactory","value":"Satisfactory"},{"label":"Un-Satisfactory","value":"Un-Satisfactory"},{"label":"N/A","value":"N/A"},{"label":"In Progress","value":"In Progress"}],"resource":"","json":"","url":"","custom":""},"valueProperty":"","dataType":"","idPath":"id","template":"<span>{{ item.label }}</span>","refreshOn":"","clearOnRefresh":false,"searchEnabled":true,"selectThreshold":0.3,"readOnlyValue":false,"customOptions":{},"persistent":true,"protected":false,"dbIndex":false,"encrypted":false,"clearOnHide":true,"customDefaultValue":"","calculateValue":"","calculateServer":false,"allowCalculateOverride":false,"validateOn":"change","validate":{"required":false,"customMessage":"","custom":"","customPrivate":false,"json":"","strictDateValidation":false,"multiple":false,"unique":false},"unique":false,"errorLabel":"","key":"conclusion","tags":[],"properties":{},"conditional":{"show":null,"when":null,"eq":"","json":""},"customConditional":"","logic":[],"attributes":{},"overlay":{"style":"","page":"","left":"","top":"","width":"","height":""},"type":"select","indexeddb":{"filter":{}},"selectFields":"","searchField":"","minSearch":0,"filter":"","limit":100,"redrawOn":"","input":true,"prefix":"","suffix":"","showCharCount":false,"showWordCount":false,"allowMultipleMasks":false,"lazyLoad":true,"authenticate":false,"searchThreshold":0.3,"fuseOptions":{"include":"score","threshold":0.3},"id":"e4awuw0000000000","defaultValue":""},"tabletemplatecontainer.tabletemplatedatagrid.issues":{"label":"Issues","tableView":true,"key":"issues","logic":[{"name":"Mandatory","trigger":{"type":"javascript","javascript":"result=(data.tabletemplatedatagridconclusion==\"Un-Satisfactory\")"},"actions":[{"name":"Required","type":"property","property":{"label":"Required","value":"validate.required","type":"boolean"},"state":true}]}],"type":"textfield","input":true,"placeholder":"","prefix":"","customClass":"","suffix":"","multiple":false,"defaultValue":null,"protected":false,"unique":false,"persistent":true,"hidden":false,"clearOnHide":true,"refreshOn":"","redrawOn":"","modalEdit":false,"labelPosition":"top","description":"","errorLabel":"","tooltip":"","hideLabel":false,"tabindex":"","disabled":false,"autofocus":false,"dbIndex":false,"customDefaultValue":"","calculateValue":"","calculateServer":false,"widget":{"type":"input"},"attributes":{},"validateOn":"change","validate":{"required":false,"custom":"","customPrivate":false,"strictDateValidation":false,"multiple":false,"unique":false,"minLength":"","maxLength":"","pattern":""},"conditional":{"show":null,"when":null,"eq":""},"overlay":{"style":"","left":"","top":"","width":"","height":""},"allowCalculateOverride":false,"encrypted":false,"showCharCount":false,"showWordCount":false,"properties":{},"allowMultipleMasks":false,"mask":false,"inputType":"text","inputFormat":"plain","inputMask":"","spellcheck":true,"id":"e7neh0j0000000000000000"},"tabletemplatecontainer.tabletemplatedatagrid.complete":{"label":"Complete","description":"","tooltip":"","shortcut":"","inputType":"checkbox","customClass":"","tabindex":"","hidden":false,"hideLabel":false,"autofocus":false,"disabled":false,"tableView":false,"modalEdit":false,"defaultValue":false,"persistent":true,"protected":false,"dbIndex":false,"encrypted":false,"redrawOn":"","clearOnHide":true,"customDefaultValue":"","calculateValue":"","calculateServer":false,"allowCalculateOverride":false,"validate":{"required":false,"customMessage":"","custom":"","customPrivate":false,"json":"","strictDateValidation":false,"multiple":false,"unique":false},"errorLabel":"","key":"complete","tags":[],"properties":{},"conditional":{"show":null,"when":null,"eq":"","json":""},"customConditional":"","logic":[],"attributes":{},"overlay":{"style":"","page":"","left":"","top":"","width":"","height":""},"type":"checkbox","name":"","value":"","input":true,"placeholder":"","prefix":"","suffix":"","multiple":false,"unique":false,"refreshOn":"","labelPosition":"right","widget":null,"validateOn":"change","showCharCount":false,"showWordCount":false,"allowMultipleMasks":false,"dataGridLabel":true,"id":"e3kxhnq000000000"},"tabletemplatecontainer.tabletemplatedatagrid.auditManagerComments":{"label":"Audit Manager Comments","tableView":true,"key":"auditManagerComments","type":"textfield","input":true,"placeholder":"","prefix":"","customClass":"","suffix":"","multiple":false,"defaultValue":null,"protected":false,"unique":false,"persistent":true,"hidden":false,"clearOnHide":true,"refreshOn":"","redrawOn":"","modalEdit":false,"labelPosition":"top","description":"","errorLabel":"","tooltip":"","hideLabel":false,"tabindex":"","disabled":false,"autofocus":false,"dbIndex":false,"customDefaultValue":"","calculateValue":"","calculateServer":false,"widget":{"type":"input"},"attributes":{},"validateOn":"change","validate":{"required":false,"custom":"","customPrivate":false,"strictDateValidation":false,"multiple":false,"unique":false,"minLength":"","maxLength":"","pattern":""},"conditional":{"show":null,"when":null,"eq":""},"overlay":{"style":"","left":"","top":"","width":"","height":""},"allowCalculateOverride":false,"encrypted":false,"showCharCount":false,"showWordCount":false,"properties":{},"allowMultipleMasks":false,"mask":false,"inputType":"text","inputFormat":"plain","inputMask":"","spellcheck":true,"id":"ed9ipvi0000000000000000"}}',
@EntityId=4,@Entitytypeid=13,@UserloginId=377,@MethodName=NULL,
@additionalData=N'{"tableConfigData":{"orderByColumn":"refno","matchOnColumn":"refno","allowedColumnsToImport":[{"name":"refno","id":1,"idString":null},{"name":"control","id":2,"idString":null},{"name":"procedure","id":3,"idString":null},{"name":"observation","id":4,"idString":null,"isSelected":true},{"name":"conclusion","id":5,"idString":null,"isSelected":true},{"name":"issues","id":6,"idString":null,"isSelected":true},{"name":"complete","id":7,"idString":null,"isSelected":true},{"name":"auditManagerComments","id":8,"idString":null,"isSelected":true}]}}'

--ADD 3 COLUMNS orderByColumn,matchOnColumn,allowImport=1=TRUE - only for those where IsSelected=true
SELECT * FROM TemplateTableColumnMaster WHERE CustomFormsInstanceID=4 AND VersionNum=22

ALTER TABLE TemplateTableColumnMaster ADD OrderByColumn VARCHAR(100),MatchOnColumn VARCHAR(100),AllowImport BIT
ALTER TABLE TemplateTableColumnMaster_history ADD OrderByColumn VARCHAR(100),MatchOnColumn VARCHAR(100),AllowImport BIT

--2.
--IF columnToCompare EXISTS UPDATE ELSE INSERT INTO TEMPLATETABLE_<apikey>_data PROVIDED entityType":"13","parentEntityId":-1,"parentEntityTypeId":-1
exec importDataForEntity 
@dataJSON=N'{"data":[{"entityType":"13","entityId":"4","parentEntityId":-1,"parentEntityTypeId":-1,"columnToCompare":"refno","dataToMap":[{"refno":1001,"control":"Maintenance of bank accounts is an operational responsibility, with Group Treasury kept updated of any changes.","procedure":"Confirm that any changes made to the bank accounts Group Treasury where well informed of the changes","observation":"AAA","conclusion":"Satisfactory","issues":"aaaa","complete":"Yes","auditManagerComments":"dfahlk"},{"refno":1001,"control":"Maintenance of bank accounts is an operational responsibility, with Group Treasury kept updated of any changes.","procedure":"Confirm that any changes made to the bank accounts Group Treasury where well informed of the changes","observation":"AAA","conclusion":"Satisfactory","issues":"aaaa","complete":"Yes","auditManagerComments":"dfahlk"},{"refno":1001,"control":"Maintenance of bank accounts is an operational responsibility, with Group Treasury kept updated of any changes.","procedure":"Confirm that any changes made to the bank accounts Group Treasury where well informed of the changes","observation":"AAA","conclusion":"Satisfactory","issues":"aaaa","complete":"Yes","auditManagerComments":"dfahlk"}]}],"selectedAction":"update","fileName":"FormImport.xlsx","sheetsDependency":[]}',
@MethodName=NULL,@UserLoginID=377,
@OperationType=1/2 --if 1=INSERT/UPDATE;IF 2=DELETE THEN INSERT

SELECT * FROM CustomFormsInstance WHERE CustomFormsInstanceID=4  --<entityId>= GET NAME AND CHECK TEMPLATETABLE_<apikey>_data
SELECT * FROM TemplateTable_cash_data
--ALSO, INSERT 1 ROW IN THIS TABLE: --tableid & entityTypeid unique key: insert only if this combination not available
--tableid=entityId;FrameworkID=-1;entityid=-1;entityTypeid=entityType;apikey=SELECT apikey FROM CustomFormsInstance WHERE CustomFormsInstanceID=4 
Select * from Table_EntityMapping

SET XACT_ABORT ON
--ROLLBACK COMMIT
BEGIN TRAN;
exec importDataForEntity 
@dataJSON=N'{"data":[{"entityType":"13","entityId":"4","parentEntityId":-1,"parentEntityTypeId":-1,"columnToCompare":"refno","dataToMap":[{"refno":1001,"control":"Maintenance of bank accounts is an operational responsibility, with Group Treasury kept updated of any changes.","procedure":"Confirm that any changes made to the bank accounts Group Treasury where well informed of the changes","observation":"AAA","conclusion":"Satisfactory","issues":"aaaa","complete":"Yes","auditManagerComments":"dfahlk"},{"refno":1001,"control":"Maintenance of bank accounts is an operational responsibility, with Group Treasury kept updated of any changes.","procedure":"Confirm that any changes made to the bank accounts Group Treasury where well informed of the changes","observation":"AAA","conclusion":"Satisfactory","issues":"aaaa","complete":"Yes","auditManagerComments":"dfahlk"},{"refno":1001,"control":"Maintenance of bank accounts is an operational responsibility, with Group Treasury kept updated of any changes.","procedure":"Confirm that any changes made to the bank accounts Group Treasury where well informed of the changes","observation":"AAA","conclusion":"Satisfactory","issues":"aaaa","complete":"Yes","auditManagerComments":"dfahlk"}]}],"selectedAction":"update","fileName":"FormImport.xlsx","sheetsDependency":[]}',
@MethodName=NULL,@UserLoginID=377 

select * FROM dbo.CustomFormsInstance WHERE CustomFormsInstanceID=4
select * FROM dbo.CustomForms WHERE CustomFormID=51
SELECT * FROM TemplateTable_cash_data WHERE refno=1001





